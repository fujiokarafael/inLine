{% extends "base_mobile.html" %} {% block content %}
<div class="min-h-screen bg-slate-50 font-sans antialiased pb-12">
  <div class="bg-blue-600 pt-12 pb-16 px-6 text-center shadow-lg">
    <p class="text-blue-200 text-xs font-black uppercase tracking-[0.2em] mb-2">
      Sua Senha
    </p>
    <h1 class="text-7xl font-black text-white tracking-tighter shadow-sm">
      {{ pedido.id|slice:":4"|upper }}
    </h1>
  </div>

  <div class="max-w-md mx-auto -mt-8 px-4">
    <div
      class="bg-white rounded-[2.5rem] shadow-xl shadow-slate-200/60 overflow-hidden border border-slate-100"
    >
      <div class="p-8 pb-4 text-center">
        {% if pedido.status == 'PENDENTE' %}
        <div
          class="inline-flex items-center gap-2 px-6 py-3 bg-amber-50 rounded-full border border-amber-100"
        >
          <div class="w-3 h-3 rounded-full bg-amber-500 animate-pulse"></div>
          <span
            class="font-black uppercase tracking-tight text-amber-700 text-sm"
            >Na Fila de Espera</span
          >
        </div>
        {% elif pedido.status == 'PRODUCAO' %}
        <div
          class="inline-flex items-center gap-2 px-6 py-3 bg-blue-50 rounded-full border border-blue-100"
        >
          <div class="w-3 h-3 rounded-full bg-blue-500 animate-bounce"></div>
          <span
            class="font-black uppercase tracking-tight text-blue-700 text-sm"
            >Sendo Preparado</span
          >
        </div>
        {% else %}
        <div
          class="inline-flex items-center gap-2 px-6 py-3 bg-green-50 rounded-full border border-green-100"
        >
          <div class="w-3 h-3 rounded-full bg-green-500"></div>
          <span
            class="font-black uppercase tracking-tight text-green-700 text-sm"
            >Pedido Pronto!</span
          >
        </div>
        {% endif %}
      </div>

      <div class="p-8 pt-4">
        <div class="flex items-center justify-between mb-6">
          <h3
            class="font-black text-slate-800 text-lg uppercase tracking-tight"
          >
            Seus Pratos
          </h3>
          <span
            class="text-[10px] font-bold text-slate-400 bg-slate-100 px-2 py-1 rounded"
          >
            {{ pedido.filas.count }} ITEM(S)
          </span>
        </div>

        <div class="space-y-3">
          {% for item in pedido.filas.all %}
          <div
            class="flex items-center justify-between p-4 rounded-2xl border border-slate-50 bg-slate-50/50"
          >
            <div class="flex flex-col">
              <span class="font-bold text-slate-700"
                >{{ item.prato.nome }}</span
              >
              <span class="text-[10px] text-slate-400 font-medium italic"
                >Unidade individual</span
              >
            </div>

            <div class="flex items-center">
              {% if item.status == 'FINALIZADO' or item.status == 'RETIRADO' %}
              <span
                class="bg-green-500 text-white text-[10px] font-black px-3 py-1.5 rounded-full shadow-sm shadow-green-200 uppercase"
              >
                Pronto
              </span>
              {% elif item.status == 'EM_PRODUCAO' %}
              <span
                class="bg-blue-100 text-blue-600 text-[10px] font-black px-3 py-1.5 rounded-full uppercase"
              >
                Fazendo
              </span>
              {% else %}
              <span
                class="bg-white text-slate-400 border border-slate-200 text-[10px] font-black px-3 py-1.5 rounded-full uppercase"
              >
                Fila
              </span>
              {% endif %}
            </div>
          </div>
          {% endfor %}
        </div>

        <div class="mt-10 pt-6 border-t border-slate-100 text-center">
          <p
            class="text-[10px] text-slate-400 font-bold uppercase tracking-[0.2em]"
          >
            Atualizado em: {{ "now"|date:"H:i:s" }}
          </p>
        </div>
      </div>
    </div>

    <p class="text-center mt-8 text-slate-400 text-xs px-6 leading-relaxed">
      Mantenha esta tela aberta. O status será atualizado automaticamente assim
      que sua comida estiver pronta.
    </p>
  </div>
</div>

<script>
  // Refresh inteligente: apenas se a página estiver visível para economizar bateria
  setInterval(() => {
    if (!document.hidden) {
      location.reload();
    }
  }, 10000);
</script>
{% endblock %}
